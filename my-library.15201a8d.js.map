{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAAeC,ECAZ,W,sBDAkBC,EACPC,EAAWC,G,aACrBC,KAAKF,UAAYA,EACjBE,KAAKC,YAAc,GACnBD,KAAKE,KAAO,EACZF,KAAKG,MAAQ,EACbH,KAAKD,aAAeA,C,iBAGtBK,IAAA,S,MAAA,W,WACQC,EAAaC,KAAKC,MAAMC,aAAaC,QAAQT,KAAKC,cACxD,GAAKI,EAAL,CACAL,KAAKG,MAAQO,KAAKC,KAAKN,EAAWO,OAAS,IAC3C,IAAMC,EAAwBR,EAAWS,QAAO,SAACC,EAAKC,EAAOC,GAC3D,OAAIA,EAAoB,GAAZC,EAAKhB,MAAae,GAA2B,IAAjBC,EAAKhB,KAAO,GAC1CiB,EAAAC,EAAD,CAAIL,GAAAM,OAAJ,CAASL,IAETD,C,GAER,IACGO,EAAStB,KAAKD,aAAac,GACjCb,KAAKF,UAAUyB,UAAYD,CAVV,C,OCXlB,G,2FCaHE,EAba,CACXC,uBAAwBC,SAASC,cAAc,uBAC/CC,wBAAyBF,SAASC,cAChC,kCAEFE,kBAAmBH,SAASC,cAAc,4BAC1CG,gBAAiBJ,SAASC,cAAc,0BACxCI,oBAAqBL,SAASC,cAAc,wBAC5CK,aAAcN,SAASC,cAAc,0BACrCM,cAAeP,SAASC,cAAc,2BACtCO,SAAUR,SAASC,cAAc,qBCCnCH,EAAKK,kBAAkBM,iBAAiB,SAkExC,SAA2BC,GA2BzBZ,EAAKK,kBAAkBQ,UAAUC,IAAI,eACrCd,EAAKM,gBAAgBO,UAAUE,OAAO,eA1BtCC,EAAYvC,YAAcwC,EAAAC,WAC1BC,EAAoBH,E,IApEtBhB,EAAKM,gBAAgBK,iBAAiB,SAuEtC,SAAyBC,GA0BvBZ,EAAKM,gBAAgBO,UAAUC,IAAI,eACnCd,EAAKK,kBAAkBQ,UAAUE,OAAO,eAzBxCC,EAAYvC,YAAcwC,EAAAG,SAC1BD,EAAoBH,E,IAzEtBhB,EAAKC,uBAAuBU,iBAAiB,SAqB7C,SAA0BC,GACxB,IAAMS,EAAWT,EAAEU,OAAOC,QAAQ,MAClC,IAAKF,EAAU,OAEf,IAEMG,EAKR,SAA4BC,EAASC,GACnC,IAAMC,EAAa7C,KAAKC,MAAMC,aAAaC,QAAQyC,EAAYjD,cAC/D,IAAKkD,EAAY,OAIjB,OAFkBA,EAAWC,MAAK,SAAAC,G,OAAKA,EAAFC,KAAgBL,C,IATnCM,CAFFC,OAAOX,EAASY,QAAQR,SAEMT,IAE9C,EAAAkB,EAAAC,SAAYX,GAAW,W,OAAML,EAAoBH,E,OA5BnDhB,EAAKI,wBAAwBO,iBAC3B,SA0EF,SAAuCC,IACrC,EAAAwB,EAAAD,WACA,IAAMb,EAASV,EAAEU,OAAOC,QAAQ,UAChC,IAAKD,EAAQ,OAETA,EAAOW,QAAQvD,OACjBsC,EAAYtC,KAAOsD,OAAOV,EAAOW,QAAQvD,OAEvC4C,EAAOW,QAAQI,WACjBrB,EAAYtC,MAAQsD,OAAOV,EAAOW,QAAQI,WAE5ClB,EAAoBH,E,IAlFtBhB,EAAKQ,aAAaG,iBAAiB,QAAS2B,EAAAH,SAC5CnC,EAAKS,cAAcE,iBAAiB,QAAS2B,EAAAH,SAE7C,IAAMnB,EAAc,IAAI5C,EACtB4B,EAAKC,uBACLsC,EAAAJ,SA+BF,SAAShB,EAAoBqB,GA4D3BxC,EAAKC,uBAAuBF,UAAY,GACxCC,EAAKI,wBAAwBL,UAAY,GA1DzC,IAAM4B,EAAa7C,KAAKC,MACtBC,aAAaC,QAAQuD,EAAc/D,eAEhCkD,GAAcA,EAAWvC,OAAS,EA2DvCY,EAAKO,oBAAoBM,UAAUE,OAAO,oBAI1Cf,EAAKO,oBAAoBM,UAAUC,IAAI,mBAzDvC0B,EAAcC,SAEVd,EAAWvC,OAAS,KACtB,EAAAsD,EAAAP,SACEK,EAAc9D,KACd8D,EAAc7D,MACdqB,EAAKI,yB,CAyDX,SAASuC,IACPzC,SAAS0C,KAAK/B,UAAUgC,OAAO,cAC/B3C,SAAS0C,KAAK/B,UAAUgC,OAAO,eAM3B3C,SAAS0C,KAAK/B,UAAUiC,SAAS,gBACnC5C,SAAS6C,eAAe,UAAUC,SAAU,EAC5ChE,aAAaiE,QAAQ,eAAgB,iBAC5B/C,SAAS0C,KAAK/B,UAAUiC,SAAS,gBAC1C5C,SAAS6C,eAAe,UAAUC,SAAU,EAC5ChE,aAAaiE,QAAQ,eAAgB,e,CApHzCjC,EAAYvC,YAAcwC,EAAAC,WAE1BC,EAAoBH,GAEpBd,SAAS0C,KAAK/B,UAAUC,IAAI,eAE5Bd,EAAKU,SAASC,iBAAiB,QAASgC,GA8FZzC,SAASC,cAAc,wBAC/BQ,iBAAiB,QAASuC,EAAAC,eAsBC,gBAAzCnE,aAAaC,QAAQ,iBACvB0D,G","sources":["src/js/Movies-library.js","<<jsx-config-pragma.js>>","src/js/refs-library.js","src/js/library-page.js"],"sourcesContent":["export default class MoviesLibrary {\n  constructor(container, createMarkup) {\n    this.container = container;\n    this.storageName = '';\n    this.page = 1;\n    this.pages = 1;\n    this.createMarkup = createMarkup;\n  }\n\n  render() {\n    const moviesData = JSON.parse(localStorage.getItem(this.storageName));\n    if (!moviesData) return;\n    this.pages = Math.ceil(moviesData.length / 20);\n    const currentPageMoviesData = moviesData.reduce((acc, movie, index) => {\n      if (index < this.page * 20 && index >= (this.page - 1) * 20) {\n        return [...acc, movie];\n      } else {\n        return acc;\n      }\n    }, []);\n    const markup = this.createMarkup(currentPageMoviesData);\n    this.container.innerHTML = markup;\n  }\n}\n",null,"const refs = {\n  libraryMoviesContainer: document.querySelector('[data-user-library]'),\n  libraryMoviesPagination: document.querySelector(\n    '[data-user-library-pagination]'\n  ),\n  libraryWatchedBtn: document.querySelector('[data-library=\"watched\"]'),\n  libraryQueueBtn: document.querySelector('[data-library=\"queue\"]'),\n  emptyLibraryMessage: document.querySelector('[data-empty-message]'),\n  openModalBtn: document.querySelector('[data-modal-team-open]'),\n  closeModalBtn: document.querySelector('[data-modal-team-close]'),\n  switcher: document.querySelector('.switcher-toggle'),\n};\n\nexport default refs;\n","import MoviesLibrary from './Movies-library';\nimport createMoviesMarkup from '../templates/movies-markup';\nimport renderPagination from './render-pagination';\nimport renderModal from './render-modal';\nimport backToTop from './scroll-to-top';\nimport { LS_QUEUE, LS_WATCHED } from './constants';\nimport clickTeamModal from './team';\nimport { modalAuthOpen } from './authentication';\n\nimport refs from './refs-library';\n\nrefs.libraryWatchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.libraryQueueBtn.addEventListener('click', onQueueBtnClick);\nrefs.libraryMoviesContainer.addEventListener('click', onMovieCardClick);\nrefs.libraryMoviesPagination.addEventListener(\n  'click',\n  onMovieLibraryPaginationClick\n);\nrefs.openModalBtn.addEventListener('click', clickTeamModal);\nrefs.closeModalBtn.addEventListener('click', clickTeamModal);\n\nconst userLibrary = new MoviesLibrary(\n  refs.libraryMoviesContainer,\n  createMoviesMarkup\n);\n\nuserLibrary.storageName = LS_WATCHED;\n\nupdateMoviesLibrary(userLibrary);\n\ndocument.body.classList.add('theme-light');\n\nrefs.switcher.addEventListener('click', toggleTheme);\n\nfunction onMovieCardClick(e) {\n  const targetEl = e.target.closest('li');\n  if (!targetEl) return;\n\n  const movieId = Number(targetEl.dataset.movieId);\n\n  const movieData = getMovieDatafromLS(movieId, userLibrary);\n\n  renderModal(movieData, () => updateMoviesLibrary(userLibrary));\n}\n\nfunction getMovieDatafromLS(movieId, libraryName) {\n  const moviesList = JSON.parse(localStorage.getItem(libraryName.storageName));\n  if (!moviesList) return;\n\n  const movieData = moviesList.find(({ id }) => id === movieId);\n\n  return movieData;\n}\n\nfunction updateMoviesLibrary(moviesLibrary) {\n  clearLibraryContainer();\n\n  const moviesList = JSON.parse(\n    localStorage.getItem(moviesLibrary.storageName)\n  );\n  if (!moviesList || moviesList.length < 1) {\n    showEmptyLibraryMessage();\n    return;\n  }\n\n  hideEmptyLibraryMessage();\n  moviesLibrary.render();\n\n  if (moviesList.length > 20) {\n    renderPagination(\n      moviesLibrary.page,\n      moviesLibrary.pages,\n      refs.libraryMoviesPagination\n    );\n  }\n}\n\nfunction onWatchedBtnClick(e) {\n  setWatchedBtnActive();\n  userLibrary.storageName = LS_WATCHED;\n  updateMoviesLibrary(userLibrary);\n}\n\nfunction onQueueBtnClick(e) {\n  setQueueBtnActive();\n  userLibrary.storageName = LS_QUEUE;\n  updateMoviesLibrary(userLibrary);\n}\n\nfunction onMovieLibraryPaginationClick(e) {\n  backToTop();\n  const target = e.target.closest('button');\n  if (!target) return;\n\n  if (target.dataset.page) {\n    userLibrary.page = Number(target.dataset.page);\n  }\n  if (target.dataset.pageStep) {\n    userLibrary.page += Number(target.dataset.pageStep);\n  }\n  updateMoviesLibrary(userLibrary);\n}\n\nfunction setWatchedBtnActive() {\n  refs.libraryWatchedBtn.classList.add('active__btn');\n  refs.libraryQueueBtn.classList.remove('active__btn');\n}\n\nfunction setQueueBtnActive() {\n  refs.libraryQueueBtn.classList.add('active__btn');\n  refs.libraryWatchedBtn.classList.remove('active__btn');\n}\n\nfunction clearLibraryContainer() {\n  refs.libraryMoviesContainer.innerHTML = '';\n  refs.libraryMoviesPagination.innerHTML = '';\n}\n\nfunction showEmptyLibraryMessage() {\n  refs.emptyLibraryMessage.classList.remove('visually-hidden');\n}\n\nfunction hideEmptyLibraryMessage() {\n  refs.emptyLibraryMessage.classList.add('visually-hidden');\n}\n\nconst modalOpenBtnLibrary = document.querySelector('#modalOpenBtnLibrary');\nmodalOpenBtnLibrary.addEventListener('click', modalAuthOpen);\n\nfunction toggleTheme() {\n  document.body.classList.toggle('theme-dark');\n  document.body.classList.toggle('theme-light');\n\n  setToLocalStorageTheme();\n}\n\nfunction setToLocalStorageTheme() {\n  if (document.body.classList.contains('theme-light')) {\n    document.getElementById('slider').checked = false;\n    localStorage.setItem('active-theme', '.theme-light');\n  } else if (document.body.classList.contains('theme-dark')) {\n    document.getElementById('slider').checked = true;\n    localStorage.setItem('active-theme', '.theme-dark');\n  }\n}\n\ninfoFromLS();\n\nfunction infoFromLS() {\n  if (localStorage.getItem('active-theme') === '.theme-dark') {\n    toggleTheme();\n  }\n}\n"],"names":["$8MBJY","parcelRequire","$9bcd64f8a5bde30b$export$2e2bcd8739ae039","MoviesLibrary","container","createMarkup","this","storageName","page","pages","key","moviesData","JSON","parse","localStorage","getItem","Math","ceil","length","currentPageMoviesData","reduce","acc","movie","index","_this","$parcel$interopDefault","$8nrFW","concat","markup","innerHTML","$1e30e50651a1cbfa$export$2e2bcd8739ae039","libraryMoviesContainer","document","querySelector","libraryMoviesPagination","libraryWatchedBtn","libraryQueueBtn","emptyLibraryMessage","openModalBtn","closeModalBtn","switcher","addEventListener","e","classList","add","remove","$20cb4a85f74a13e4$var$userLibrary","$4s6iC","LS_WATCHED","$20cb4a85f74a13e4$var$updateMoviesLibrary","LS_QUEUE","targetEl","target","closest","movieData","movieId","libraryName","moviesList","find","param","id","$20cb4a85f74a13e4$var$getMovieDatafromLS","Number","dataset","$lEOFC","default","$8vL8o","pageStep","$9BcQi","$b6vgZ","moviesLibrary","render","$8ROq3","$20cb4a85f74a13e4$var$toggleTheme","body","toggle","contains","getElementById","checked","setItem","$95ECi","modalAuthOpen"],"version":3,"file":"my-library.15201a8d.js.map"}